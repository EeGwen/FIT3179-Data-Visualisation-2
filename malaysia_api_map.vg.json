{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {
    "text": "Air Pollution Index (API) in Malaysia in 2022",
    "subtitle": "Points = monitoring cities. Color = Air Pollution Level. Use Day / Month / Time filters."
  },
  "width": 900,
  "height": 600,
  "projection": {
    "type": "mercator",
    "center": [112, 2],
    "scale": 3000
  },
  "layer": [
    {
      "data": {
        "url": "https://raw.githubusercontent.com/EeGwen/FIT3179-Data-Visualisation-2/refs/heads/main/ne_110m%20(1).json",
        "format": { "type": "topojson", "feature": "ne_110m_admin_0_countries" }
      },
      "mark": { "type": "geoshape", "fill": "#f3f4f7", "stroke": "#c9c9cf", "strokeWidth": 0.6 }
    },
    {
      "data": { "values": [] },
      "mark": { "type": "circle", "stroke": "#ffffff", "strokeWidth": 0.7, "opacity": 0.95 },
      "encoding": {
        "longitude": { "field": "Longitude", "type": "quantitative" },
        "latitude": { "field": "Latitude", "type": "quantitative" },
        "size": { "value": 120 },
        "color": {
          "field": "Air Pollution Level",
          "type": "nominal",
          "scale": {
            "domain": ["Good", "Moderate", "Unhealthy", "Very Unhealthy", "Hazardous"],
            "range": ["#2ca02c", "#ffcc00", "#ff7f0e", "#d62728", "#5c4033"]
          },
          "legend": { "title": "Air Pollution Level" }
        },
        "tooltip": [
          { "field": "City", "type": "nominal", "title": "City" },
          { "field": "State", "type": "nominal", "title": "State" },
          { "field": "API", "type": "quantitative", "title": "API" },
          { "field": "Air Pollution Level", "type": "nominal", "title": "Level" },
          { "field": "Day", "type": "ordinal", "title": "Day" },
          { "field": "Month", "type": "nominal", "title": "Month" },
          { "field": "Time", "type": "nominal", "title": "Time" }
        ]
      }
    }
  ]
}
