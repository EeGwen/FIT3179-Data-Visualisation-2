{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": "Worldwide Air Pollution Index (API) by City",
  "width": 900,
  "height": 500,
  "projection": {"type": "equalEarth"},
  "data": {
    "url": "https://raw.githubusercontent.com/EeGwen/FIT3179-Data-Visualisation-2/refs/heads/main/ne_110m%20(1).json",
    "format": {"type": "topojson", "feature": "ne_110m_admin_0_countries"}
  },
  "layer": [
    {
      "mark": {"type": "geoshape", "fill": "#f3f4f7", "stroke": "#c9c9cf", "strokeWidth": 0.5}
    },
    {
      "data": {
        "url": "https://raw.githubusercontent.com/EeGwen/FIT3179-Data-Visualisation-2/refs/heads/main/air_index_cleaned_long.csv"
      },
      "transform": [
        {"filter": "datum.Year == '2022'"},
        {"calculate": "datum['Air_Pollution_Level']", "as": "Level"}
      ],
      "mark": {"type": "geoshape"},
      "encoding": {
        "color": {
          "field": "Level",
          "type": "nominal",
          "scale": {
            "domain": ["Good", "Moderate", "Unhealthy", "Very Unhealthy", "Hazardous"],
            "range": ["#2ca02c", "#ffcc00", "#ff7f0e", "#d62728", "#5c4033"]
          },
          "legend": {"title": "Air Pollution Level"}
        },
        "tooltip": [
          {"field": "City", "type": "nominal", "title": "City"},
          {"field": "Countries", "type": "nominal", "title": "Country"},
          {"field": "Air_Pollution_Level", "type": "nominal", "title": "Level"},
          {"field": "Year", "type": "ordinal"}
        ]
      }
    }
  ]
}
